head	1.37;
access;
symbols;
locks; strict;
comment	@# @;


1.37
date	2013.12.18.03.04.31;	author jordan;	state Exp;
branches;
next	1.36;

1.36
date	2013.12.17.22.30.32;	author ubuntu;	state Exp;
branches;
next	1.35;

1.35
date	2013.10.31.02.57.49;	author jordan;	state Exp;
branches;
next	1.34;

1.34
date	2013.10.23.05.36.34;	author jordan;	state Exp;
branches;
next	1.33;

1.33
date	2013.07.30.20.38.21;	author jordan;	state Exp;
branches;
next	1.32;

1.32
date	2013.07.26.22.11.52;	author jordan;	state Exp;
branches;
next	1.31;

1.31
date	2013.06.21.07.46.54;	author jacob;	state Exp;
branches;
next	1.30;

1.30
date	2013.06.05.03.18.34;	author benson;	state Exp;
branches;
next	1.29;

1.29
date	2013.06.05.03.13.58;	author benson;	state Exp;
branches;
next	1.28;

1.28
date	2013.06.03.01.07.46;	author jacob;	state Exp;
branches;
next	1.27;

1.27
date	2013.05.15.03.27.17;	author benson;	state Exp;
branches;
next	1.26;

1.26
date	2013.05.08.03.45.04;	author benson;	state Exp;
branches;
next	1.25;

1.25
date	2013.04.17.04.24.06;	author benson;	state Exp;
branches;
next	1.24;

1.24
date	2013.03.18.00.25.44;	author jacob;	state Exp;
branches;
next	1.23;

1.23
date	2013.03.16.23.54.59;	author jacob;	state Exp;
branches;
next	1.22;

1.22
date	2013.02.05.20.39.01;	author jacob;	state Exp;
branches;
next	1.21;

1.21
date	2013.01.27.00.09.58;	author jacob;	state Exp;
branches;
next	1.20;

1.20
date	2013.01.26.23.28.34;	author jacob;	state Exp;
branches;
next	1.19;

1.19
date	2012.11.27.04.23.23;	author jordan;	state Exp;
branches;
next	1.18;

1.18
date	2012.10.16.05.56.55;	author jacob;	state Exp;
branches;
next	1.17;

1.17
date	2012.10.06.07.04.28;	author jordan;	state Exp;
branches;
next	1.16;

1.16
date	2012.10.02.04.27.19;	author crc;	state Exp;
branches;
next	1.15;

1.15
date	2012.10.02.03.52.50;	author benson;	state Exp;
branches;
next	1.14;

1.14
date	2012.10.02.02.56.05;	author benson;	state Exp;
branches;
next	1.13;

1.13
date	2012.09.25.04.28.30;	author benson;	state Exp;
branches;
next	1.12;

1.12
date	2012.09.25.03.31.42;	author jordan;	state Exp;
branches;
next	1.11;

1.11
date	2012.09.25.03.25.13;	author jordan;	state Exp;
branches;
next	1.10;

1.10
date	2012.09.25.03.23.40;	author benson;	state Exp;
branches;
next	1.9;

1.9
date	2012.09.25.03.06.57;	author jacob;	state Exp;
branches;
next	1.8;

1.8
date	2012.09.18.04.44.51;	author jordan;	state Exp;
branches;
next	1.7;

1.7
date	2012.09.11.03.00.42;	author benson;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.11.02.53.56;	author jordan;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.31.04.23.55;	author benson;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.31.04.22.47;	author jordan;	state Exp;
branches;
next	1.3;

1.3
date	2012.07.03.03.15.35;	author jordan;	state Exp;
branches;
next	1.2;

1.2
date	2012.07.03.03.14.50;	author benson;	state Exp;
branches;
next	1.1;

1.1
date	2012.06.26.02.46.53;	author benson;	state Exp;
branches;
next	;


desc
@menu
@


1.37
log
@*** empty log message ***
@
text
@<?php 

function brick_menu_alter(&$items) {
  $items['user/reset/%/%/%']['page arguments'] = array('brick_pass_reset', 2, 3, 4);
}

function brick_menu() {
  $items['a/rsvp'] = array(
    'page callback' => 'brick_dorsvp',
    'page arguments' => array(1),
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['a/unrsvp'] = array(
    'page callback' => 'brick_dounrsvp',
    'page arguments' => array(2),
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['a/%/%/rsvp'] = array(
    'page callback' => 'brick_manager_add_rsvp',
    'page arguments' => array(1,2),
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['forgotpw/ajax'] = array(
    'delivery callback' => 'ajax_deliver',
    'page callback' => 'brick_forgotpw',
    'access callback' => 'brick_access',
    'access arguments' => array(1)
  );

  $items['gosignup/ajax'] = array(
    'delivery callback' => 'ajax_deliver',
    'page callback' => 'brick_signup',
    'access callback' => 'brick_access',
    'access arguments' => array(1)
  );

  $items['rpx/brick_token_handler'] = array(
    'delivery callback' => 'ajax_deliver',
    'page callback' => 'brick_handle_rpx',
    'access callback' => 'brick_access',
    'access arguments' => array(1)
  );

  $items['signup/ajax'] = array(
    'page callback' => 'brick_signup_form_direct',
    'access callback' => 'brick_access',
    'access arguments' => array(1)
  );

  $items['a/login'] = array(
    'page callback' => 'brick_login_ajax',
    'page arguments' => array(1),
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['a/passwordupdate'] = array(
    'page callback' => 'brick_update_password',
    'page arguments' => array(1),
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['event/%/add'] = array(
      'title' => 'Add',
      'page callback' => 'brick_add_node',
      'page arguments' => array(1),
      'access callback' => 'user_has_role',
      'access arguments' => array('Event Creator'),
      'weight' => 10,
      'type' => MENU_LOCAL_TASK
  );

  $items['node/%/copy'] = array(
      'title' => 'Copy',
      'page callback' => 'brick_copy_node',
      'page arguments' => array(1),
      'access callback' => 'user_has_role',
      'access arguments' => array('Event Creator'),
      'weight' => 20,
      'type' => MENU_LOCAL_TASK
  );

  // FYI The "Edit Roster" button is dynamically created in an alter hook in brick.module

  $items['event/%/promote'] = array(
      'title' => 'Promote',
      'page callback' => 'brick_promote',
      'page arguments' => array(1),
      'access callback' => 'brick_manager_access',
      'weight' => 20,
      'type' => MENU_LOCAL_TASK
  );
 
  /*
  $items['event/%/roster'] = array(
      'title' => 'Roster',
      'page callback' => 'brick_gen_roster',
      'page arguments' => array(1),
      'access callback' => 'brick_manager_access',
      'weight' => 20,
      'type' => MENU_LOCAL_TASK
  );
  */

  brick_set_globals();

  $items['chapters'] = array(
     'title' => 'Chapters',
     'page callback' => 'brick_switch_chapter',
     'access callback' => 'brick_access',
     'weight' => -50,
     'menu_name' => 'main-menu',
     'expanded' => TRUE,
     'type' => MENU_NORMAL_ITEM
  );

  $items['webmgr/newsletter-tool'] = array(
     'title' => 'Newsletter Tool',
     'page callback' => 'brick_do_nothing',
     'access callback' => 'user_has_role',
     'access arguments' => array('Newswriter'),
     'weight' => -50,
     'file' => 'newsletter_tool/builder.php',
  );

  $items['webmgr/newsletter-tool-preview'] = array(
     'title' => 'Newsletter Tool Preview',
     'page callback' => 'brick_do_nothing',
     'access callback' => 'user_has_role',
     'access arguments' => array('Newswriter'),
     'weight' => -50,
     'file' => 'newsletter_tool/preview.php',
  );

  $items['webmgr/newsletter-tool-ajax'] = array(
     'title' => 'Newsletter Tool Ajax',
     'page callback' => 'brick_do_nothing',
     'access callback' => 'user_has_role',
     'access arguments' => array('Newswriter'),
     'weight' => -50,
     'file' => 'newsletter_tool/ajax-gateway.php',
  );

  $items['webmgr/newsletter-tool-manage-templates'] = array(
     'title' => 'Newsletter Tool Manage Templates',
     'page callback' => 'brick_do_nothing',
     'access callback' => 'user_has_role',
     'access arguments' => array('Newswriter'),
     'weight' => -50,
     'file' => 'newsletter_tool/manageTemplates.php',
  );

  
  $items['webmgr/assign-events/%/stage'] = array(
    'page callback' => 'brick_stage',
    'page arguments' => array(1),
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['webmgr/assign-events/%/stage/ajax'] = array(
      'page callback' => 'brick_ajax_stage',
      'page arguments' => array(2),
      'access callback' => 'user_has_role',
      'access arguments' => array('Event Assignment'),
  );

  $items['webmgr/assign-events/save'] = array(
    'page callback' => 'brick_assign_staged',
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['webmgr/assign-events/clear'] = array(
    'page callback' => 'brick_clear_staged',
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $items['ajax/check-staged'] = array(
    'page callback' => 'brick_ajax_check_staged',
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

  $chapters = variable_get('brick_chapters');

  $order = 0;
  foreach($chapters as $chapter) {
	$order += 1;
watchdog("info", $order);
watchdog("info", 'adding menu chapters'.$chapter['nid'].' - '.$chapter['title']);
    $items['chapters/' . $chapter['nid']] = array(
          'title' => $chapter['title'],
          'page callback' => 'brick_switch_chapter',
          'page arguments' => array(1, $chapter['nid']),
          'access callback' => 'brick_access',
          'weight' => $order,
          'tab_parent' => 'chapters',
          'menu_name' => 'main-menu',
          'type' => MENU_NORMAL_ITEM
     );
  }

  return $items;
}
@


1.36
log
@*** empty log message ***
@
text
@d23 1
a23 1
    'page callback' => 'brick_manager_add_rsvp_ajax',
a26 1
    'delivery callback' => 'ajax_deliver'
d90 2
d100 2
a101 1

d110 1
@


1.35
log
@checked in by clive
@
text
@d71 1
a71 1
  $items['node/%/add'] = array(
d76 1
a76 1
      'access arguments' => array('Event Assignment'),
d86 1
a86 1
      'access arguments' => array('Event Assignment'),
d91 1
a91 1
  $items['node/%/promote'] = array(
d100 1
a100 1
  $items['node/%/roster'] = array(
a108 6
  $items['node/%/optin'] = array(
      'page callback' => 'brick_optin_page',
      'page arguments' => array(1),
      'access callback' => 'brick_manager_access'
  );

@


1.34
log
@check in by clive.
@
text
@d198 1
d200 3
d208 1
a208 1
          'weight' => 0,
@


1.33
log
@*** empty log message ***
@
text
@d22 8
d163 1
@


1.32
log
@*** empty log message ***
@
text
@d87 1
a87 2
      'access callback' => 'user_has_role',
      'access arguments' => array('Coordinator'),
d96 1
a96 2
      'access callback' => 'user_has_role',
      'access arguments' => array('Coordinator'),
d104 1
a104 2
      'access callback' => 'user_has_role',
      'access arguments' => array('Coordinator'),
@


1.31
log
@No longer need explicit menu entry for opt-out AJAX.
@
text
@d114 1
a114 1
     'page callback' => 'brick_stay_on_same_page',
@


1.30
log
@*** empty log message ***
@
text
@a183 6
  $items['ajax/opt-out/month'] = array(
    'page callback' => 'brick_opt_out_month_ajax',
    'access callback' => 'brick_access',
    'access arguments' => array(1),
  );

@


1.29
log
@mange templates
@
text
@d155 1
a155 1
     'file' => 'newsletter_tool/manage-templates.php',
@


1.28
log
@Update links after moving (these are under webmgr).
@
text
@d149 9
@


1.27
log
@ch.
@
text
@d149 1
a149 1
  $items['assign-events/%/stage'] = array(
d156 1
a156 1
  $items['assign-events/%/stage/ajax'] = array(
d158 1
a158 1
      'page arguments' => array(1),
d163 1
a163 1
  $items['assign-events/save'] = array(
d169 1
a169 1
  $items['assign-events/clear'] = array(
@


1.26
log
@changed opt-in to assign-events
@
text
@d122 1
a122 1
  $items['newsletter_tool'] = array(
d131 1
a131 1
  $items['newsletter_tool_preview'] = array(
d134 2
a135 1
     'access callback' => 'brick_access',
d140 1
a140 1
  $items['newsletter_tool_ajax'] = array(
d143 2
a144 1
     'access callback' => 'brick_access',
@


1.25
log
@*** empty log message ***
@
text
@d147 1
a147 1
  $items['opt-in/%/stage'] = array(
d154 1
a154 1
  $items['opt-in/%/stage/ajax'] = array(
d161 1
a161 1
  $items['opt-in/save'] = array(
d167 1
a167 1
  $items['opt-in/clear'] = array(
@


1.24
log
@Add entry for new AJAX call.
@
text
@a82 1

@


1.23
log
@Add opt-out ajax entry
@
text
@d180 6
@


1.22
log
@Add entry for AJAX staging.
@
text
@d174 6
@


1.21
log
@Adding save/clear actions for opt-in page.
@
text
@d155 7
@


1.20
log
@Adding new item for staging opt-ins.
@
text
@d155 12
@


1.19
log
@*** empty log message ***
@
text
@d148 7
@


1.18
log
@Add optin url handling.
@
text
@d3 4
@


1.17
log
@*** empty log message ***
@
text
@d100 7
@


1.16
log
@*** empty log message ***
@
text
@d11 7
@


1.15
log
@*** empty log message ***
@
text
@a146 13

// these do not work!!! 10/1/2012: investigate how to hide
// links on certain pages (e.g. promote on non-event pages)
function brick_menu_link_alter(&$item) {
  $item['hidden'] = 1;
  $item['options']['alter'] = TRUE;
}

function brick_translated_menu_link_alter(&$item) {
  $item['hidden'] = 1;
}

?>
@


1.14
log
@changed permissions for add and copy
@
text
@d148 11
@


1.13
log
@*** empty log message ***
@
text
@d56 2
a57 1
      'access callback' => 'brick_access', 
d66 2
a67 1
      'access callback' => 'brick_access', 
d87 2
a88 1
      'access callback' => 'brick_access',
@


1.12
log
@*** empty log message ***
@
text
@d105 2
a106 1
     'access callback' => 'brick_access',
@


1.11
log
@*** empty log message ***
@
text
@d11 1
a11 1
  $items['forgotpw/ajax/%'] = array(
d15 1
a15 2
    'access arguments' => array(1),
    'page arguments' => array(1)
d18 1
a18 1
  $items['gosignup/ajax/%'] = array(
d22 1
a22 2
    'access arguments' => array(1),
    'page arguments' => array(1)
@


1.10
log
@user has roles
@
text
@d11 1
a11 1
  $items['forgotpw/ajax'] = array(
d15 2
a16 1
    'access arguments' => array(1)
d19 1
a19 1
  $items['gosignup/ajax'] = array(
d23 2
a24 1
    'access arguments' => array(1)
@


1.9
log
@Done!
@
text
@d75 2
a76 1
      'access callback' => 'brick_access', 
@


1.8
log
@.l
@
text
@a116 1
  // BL: 9/10/2012: Jakob, is this where the redirect goes?
@


1.7
log
@added newsletter_tool_ajax redirect (not working yet)
@
text
@d18 7
@


1.6
log
@*** empty log message ***
@
text
@d92 1
a92 1
  );   
d100 1
a100 1
  );   
d108 10
a117 1
  );   
@


1.5
log
@*** empty log message ***
@
text
@d18 7
@


1.4
log
@*** empty log message ***
@
text
@d95 8
@


1.3
log
@*** empty log message ***
@
text
@d18 6
@


1.2
log
@*** empty log message ***
@
text
@a68 9
  $items['node/%/nooooo'] = array(
      'title' => 'Delete all of OneBrick',
      'page callback' => 'brick_gen_group_test',
      'page arguments' => array(1),
      'access callback' => 'brick_access',
      'weight' => 20,
      'type' => MENU_LOCAL_TASK
  );

@


1.1
log
@Initial revision
@
text
@d51 1
a51 1
  $items["node/%/promote"] = array(
d82 1
a82 1
     'page callback' => 'brick_do_nothing',
a95 1
     'type' => MENU_NORMAL_ITEM
d97 1
a97 1
  
@
