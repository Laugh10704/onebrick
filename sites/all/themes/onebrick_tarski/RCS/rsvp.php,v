head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2012.02.20.23.08.47;	author jordan;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Initial revision
@
text
@<script type="text/javascript">
   jQuery(document).ready(function(){
     jQuery('#rsvpButton').colorbox({inline:true, href:"#rsvp-login", transition:"none", width:"500", title: "RSVP for this event", opacity: "0.50"});
   })

  function sendRSVPRequest(url, extraparams) {
    var params = jQuery("#rsvp-login").serialize();

    params += extraparams;

    jQuery.ajax({
     url: url + "?" + params,
     dataType: 'json',
     success: function(result) {
        if (result.message) {
          var feedback = jQuery("#rsvpFeedback");
          feedback.html(result.message);
        }
        if (result.status == "1") {
          window.location.reload();
        }
     }
    });
  }

   function doRSVP() {
      jQuery("#rsvpFeedback").html("");
      sendRSVPRequest("/a/rsvp", "");
   }

</script>

<style type="text/css">
  #agreeArea label {
    display: inline;
    vertical-align: 2px;
  }

  #rsvp-login {
  }
</style>

<div style="display:none">
  <form id='rsvp-login' class="popupForm">
    <label for="rsvp-email">
      Your Email (so we can contact you about updates to the event):
    </label>
    <input type="hidden" name="nid" value="<?php echo $node->nid; ?>" />
    <input type="text" id="rsvp-email" name="email" class="form-text required" size="50" value="<?php global $user; if (user_is_logged_in()) {echo $user->mail;}?>">

     <label for="rsvp-name">
      Your Name (so we know what to call you!):
    </label>

    <?php
        global $user;
        $userName = "";
        if (user_is_logged_in()) {
           $loadedUser = user_load($user->uid);
           $userName = $loadedUser->field_user_fname[LANGUAGE_NONE][0]['value'] . " " . $loadedUser->field_user_sname[LANGUAGE_NONE][0]['value'];
        }
    ?>

    <input type="text" id="rsvp-name" name="name" class="form-text required" size="50" value="<?php echo $userName ?>">


    <div id="agreeArea">    By submitting my RSVP, I acknowledge that I am over 18 years of age. I have read, and agree to <a href="http://siliconvalley.onebrick.org/documents/waiver/" target="_blank">One Brick's Waiver, Assumption of Risk and Release.</a>
    </div>

    <div id="rsvpNote">
      <label for="rsvpNote">Note to send to organizers (optional):</label>
      <textarea style="height:100px" id="rsvpNote" name="rsvpNote"></textarea>

    </div>

    <input type="button" class="form-submit" value="RSVP" onclick="doRSVP();"/>
    <span id="rsvpFeedback"/>
  </form>
</div>

@
