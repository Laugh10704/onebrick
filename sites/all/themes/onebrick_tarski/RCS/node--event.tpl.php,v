head	1.32;
access;
symbols;
locks; strict;
comment	@# @;


1.32
date	2013.12.18.03.09.30;	author jordan;	state Exp;
branches;
next	1.31;

1.31
date	2013.12.18.03.06.13;	author crc;	state Exp;
branches;
next	1.30;

1.30
date	2013.04.05.23.56.35;	author crc;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.19.03.07.34;	author crc;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.16.22.15.25;	author benson;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.16.21.20.37;	author benson;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.05.05.34.27;	author benson;	state Exp;
branches;
next	1.25;

1.25
date	2013.02.26.04.44.19;	author benson;	state Exp;
branches;
next	1.24;

1.24
date	2013.01.27.19.16.16;	author jacob;	state Exp;
branches;
next	1.23;

1.23
date	2013.01.26.20.08.34;	author benson;	state Exp;
branches;
next	1.22;

1.22
date	2012.12.11.06.38.39;	author jacob;	state Exp;
branches;
next	1.21;

1.21
date	2012.12.11.06.16.31;	author jacob;	state Exp;
branches;
next	1.20;

1.20
date	2012.10.09.02.03.44;	author jacob;	state Exp;
branches;
next	1.19;

1.19
date	2012.10.03.20.31.18;	author crc;	state Exp;
branches;
next	1.18;

1.18
date	2012.10.02.04.15.09;	author crc;	state Exp;
branches;
next	1.17;

1.17
date	2012.09.25.04.37.44;	author jacob;	state Exp;
branches;
next	1.16;

1.16
date	2012.09.25.01.51.38;	author jacob;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.18.07.03.19;	author jacob;	state Exp;
branches;
next	1.14;

1.14
date	2012.08.14.02.44.03;	author jordan;	state Exp;
branches;
next	1.13;

1.13
date	2012.06.26.02.24.42;	author benson;	state Exp;
branches;
next	1.12;

1.12
date	2012.05.16.02.08.28;	author jordan;	state Exp;
branches;
next	1.11;

1.11
date	2012.05.16.01.32.04;	author ubuntu;	state Exp;
branches;
next	1.10;

1.10
date	2012.05.16.01.27.38;	author ubuntu;	state Exp;
branches;
next	1.9;

1.9
date	2012.05.16.01.23.30;	author jordan;	state Exp;
branches;
next	1.8;

1.8
date	2012.01.27.20.18.21;	author crc;	state Exp;
branches;
next	1.7;

1.7
date	2012.01.27.14.51.25;	author crc;	state Exp;
branches;
next	1.6;

1.6
date	2012.01.27.14.09.27;	author crc;	state Exp;
branches;
next	1.5;

1.5
date	2012.01.27.14.07.49;	author crc;	state Exp;
branches;
next	1.4;

1.4
date	2012.01.27.03.49.10;	author crc;	state Exp;
branches;
next	1.3;

1.3
date	2012.01.25.05.22.37;	author jordan;	state Exp;
branches;
next	1.2;

1.2
date	2012.01.25.05.18.19;	author crc;	state Exp;
branches;
next	1.1;

1.1
date	2012.01.25.02.42.50;	author ubuntu;	state Exp;
branches;
next	;


desc
@@


1.32
log
@*** empty log message ***
@
text
@<?php
if (preg_match('/^\/ical\//', $_SERVER['REQUEST_URI'])) {
    include 'node--event--ical.tpl.php';
    return;
}
?>
<script language="javascript">
  jQuery(document).ready(function(){
      var promoteButton = jQuery("ul.tabs").find("a:contains('Promote')");
      if (promoteButton) {
         promoteButton.colorbox({inline:true, href:"#promoteArea", title:"Promote", transition:"none", width:"600"});
      }

      /*
      var rosterButton = jQuery("ul.tabs").find("a:contains('Roster')");
      
      if (rosterButton) {
	rosterButton.attr("target", "_blank");
      }
      */
  });

</script>


<style>
table {
  border: 1px solid lightgray; 
}
td {
  padding: .4em; 
}
td.title {
  vertical-align: top; 
  font-weight: bold; 
  background-color:#EEE; 
  width: 10em;
}
</style>

<table valign="middle" id="Event Details"; width="97%" border="0" cellpadding="0" cellspacing="0"> 
  <tr>
    <td class='title'>Event:</td>
    <td><B>
		<?php
			print strip_tags($node->title);
			if (brick_event_is_cancelled($node)) {
				print " (CANCELLED)";
			}
		?>
	</B>
	</div>
    </td>

  </tr>
  <tr>
    <td class='title'>Location:</td>
    <td>
 	<?php
	if ($address = brick_site_address($node)) {
		print("$address <a title=\"Google Map\" ");
	  print ("href=\"http://maps.google.com/maps?q=");
	  print("$address\" target=\"_blank\">");
	  print("<img width=\"20\" src=\"/sites/default/files/images/google_maps.png\" /></a>");
	}
      ?>
    </td>
    </tr>
  <tr>
    <td class='title'>Date:</td>
    <td>
        <?php echo brick_event_from_to($node); ?>
	<a title="Add to Calendar" href="/ical/<?php echo $node->nid; ?>/event.ics"><img width="20" src="/sites/default/files/images/Download_Event.png" /></a>

    </td>
  <tr>
    <td class='title'>Staff:</td> 
    <td> <?php print(brick_format_managment_list($node, TRUE)); ?></td>
  </tr>
  </tr>
    <td class='title'>RSVP:</td>
    <td>
 <! @@@@@@ How do we keep the button on the same line?  >
       <?php
        global $user;

	if (brick_event_is_cancelled($node)) {
	  print "This event has been cancelled";
	}
	else if(strtotime($node->field_event_date['und'][0]['value']) < time()) {
	  print("This event has already occurred");
        }
        else if (user_is_logged_in() && brick_get_rsvp_status($node, $user)) {
	  print("<form method='post' action='/a/unrsvp'>");
	  print("<input type='submit' class='form-submit' value='Un-RSVP'>");
	  printf("<input type='hidden' name='nid' value='%s'>", $node->nid);
	  printf("<input type='hidden' name='uid' value='%s'>", $user->uid);
	  print("</form>");
	}
        else if (($open_date = brick_event_open_date($node)) > time() ) {
          print("This event will open on ");
          print(date("M jS", $open_date));
        }
        else if (brick_event_full($node)) {
                print("This event is FULL. Space often opens up a few days before the event, please check back.");
        }
        else {
             ctools_include('ajax');
             ctools_include('modal');
             ctools_add_js('ajax-responder');
             ctools_modal_add_js();
        
        ?>
        <script language='javascript'>
            jQuery(document).ready(function(){
		setupPopupForm("#initialRSVPForm");

                jQuery('#rsvpButton').colorbox({inline:true, href:'#currentPopupForm', transition:'none', width:'400', title: 'RSVP for this event', opacity: '0.50'});
            })
        </script>
        
         <input type='button' class='form-submit' id='rsvpButton' value='RSVP Now!' onclick="javascript: resetPopupForm('#initialRSVPForm', 'RSVPFormWrapper')"/>
            <div id="initialRSVPForm" style='display:none'>
               <?php
                   print drupal_render(drupal_get_form('brick_rsvp_form', $node->nid));
               ?>
            </div>         

	<?php
	   }
        ?>
</td>

  <tr> 
  </tr>
  <tr>
    <td class='title'>Description:</td>
    <td><?php print($node->body['und'][0]['value']) ?>

    <?php
	if (!empty($node->field_event_otherinfo)) {
	  $other = $node->field_event_otherinfo['und'][0]['value'];
	  if(!empty($other)) {
	    print("<br><br>$other");
	  }
	}
	?>
    </td>
  </tr>

<?php // "What we'll be doing"
  if (!empty($node->field_tasks)) {
    $tasks = $node->field_tasks['und'][0]['value'];
    if (!empty($tasks)) {
?>
  <tr>
    <td class='title'>What we'll be doing:</td>
    <td><?php print($tasks) ?>
    </td>
  </tr>
<?php
    }
  }
?>

<?php // "What you should know"
  if (!empty($node->should_know)) {
    $should_know = $node->field_should_know['und'][0]['value'];
    if (!empty($should_know)) {
?>
  <tr>
    <td class='title'>What you should know:</td>
    <td><?php print($should_know) ?>
    </td>
  </tr>
<?php
    }
  }
?>

<?php // "Where to meet"
  if (!empty($node->field_where_meet)) {
    $where_meet = $node->field_where_meet['und'][0]['value'];
    if (!empty($where_meet)) {
?>
  <tr>
    <td class='title'>Where to meet:</td>
    <td><?php print($where_meet) ?>
    </td>
  </tr>
<?php
    }
  }
?>

  <tr>
    <td class='title'>Organization: </td>
    <td> <?php
	 if(isset($node->field_event_organization)) {
	   $organization = node_load($node->field_event_organization['und']['0']['nid']);

	   if(isset($organization->body)) {
             print($organization->body['und'][0]['value']);
	   }
	}
	?>
    </td>
  </tr>

<?php // "Location Note"
  if(isset($node->field_event_site)) {
    $site = node_load($node->field_event_site['und']['0']['nid']);
    if(isset($site->field_site_please_note)) {
      $please_note = $site->field_site_please_note['und'][0]['value'];
      if (!empty($please_note)) {
?>
  <tr>
  <td class='title'>Location Note:</td>
  <td>  <?php print($please_note); ?>
  </td>
  </tr>
<?php
      }
    }
  }
?>

</table> 

<?php
include("promote.php");
?>
@


1.31
log
@*** empty log message ***
@
text
@d14 1
d20 1
@


1.30
log
@*** empty log message ***
@
text
@a130 26
  </tr>
        <?php
        if (brick_can_optin() && !brick_event_is_cancelled($node)) {
        ?>
  <tr>
    <td class='title'>Opt-In:</td> 
    <td>
        <script language='javascript'>
            jQuery(document).ready(function(){
                setupPopupForm("#initialOptinForm");

                jQuery('#optinButton').colorbox({inline:true, href:'#currentPopupForm', transition:'none', width:'400', title: 'Opt in to this event', opacity: '0.50'});
            })
        </script>
        <input type='button' class='form-submit' id='optinButton' value='Opt-In Settings' onclick="javascript: resetPopupForm('#initialOptinForm', 'OptinFormWrapper')"/>

        <?php echo brick_optin_string_long($node->nid) ?>

        <div id="initialOptinForm" style='display:none'>
        <?php
            brick_optin_page($node->nid);
        ?>
        </div>
    </td>
  </tr>
        <?php } ?>
@


1.29
log
@*** empty log message ***
@
text
@d58 5
a62 14
	if(isset($node->field_event_site)) {
     	   $site = node_load($node->field_event_site['und']['0']['nid']);
	   if(isset($site->location)) {
	     $address = location_address2singleline($site->location);
             print($site->title.", ");

	     print("$address");

             print ("<a title=\"Google Map\" ");
	     print ("href=\"http://maps.google.com/maps?q=");
	     print("$address\" target=\"_blank\">");
	     print("<img width=\"20\" src=\"/sites/default/files/images/google_maps.png\" /></a>");

	   }
d70 1
a70 28
        <?php
	  // The string value is represented in one timezone (probably UTC),
	  // and we need to convert it to the target timezone instead.
          if (!function_exists('get_date')) {
            function get_date($str, $from_tz, $to_tz) {
              $obj = new DateTime($str, new DateTimeZone($from_tz));
              $obj->setTimezone(new DateTimeZone($to_tz));
              return $obj;
            }
          }
          $from_tz = $node->field_event_date['und'][0]['timezone_db'];
          $to_tz = $node->field_event_date['und'][0]['timezone'];
          $ts_from = get_date($node->field_event_date['und'][0]['value'], $from_tz, $to_tz);
          $ts_to = get_date($node->field_event_date['und'][0]['value2'], $from_tz, $to_tz); 

          // Put end date if the starting date does not match the end date, otherwise just
          // list start date and times.
          $from_date = $ts_from->format('M jS Y');
          $to_date = $ts_to->format('M jS Y');
          if ($from_date == $to_date) {
            $end = $ts_to->format('g:i a');
          } else {
            $end = $ts_to->format('M jS Y, g:i a');
          }

          $start = $ts_from->format('M jS Y, g:i a');
          echo "$start - $end";
        ?>
d76 1
a76 1
    <td> <?php print(brick_format_managment_list($node)); ?></td>
@


1.28
log
@*** empty log message ***
@
text
@d204 1
a204 1
	    print("\n$other");
@


1.27
log
@*** empty log message ***
@
text
@d26 1
a26 1
   border: 1px solid lightgray; 
d29 1
a29 2
  vertical-align: top; 
       padding: .4em; 
d32 1
d63 1
a64 2
	     //print("<a href=\"http://maps.google.com/maps?q=");
			 //print("$address\">(map)</a>");
d66 4
a69 4
			 print ("<a title=\"Google Map\" ");
			 print ("href=\"http://maps.google.com/maps?q=");
			 print("$address\" target=\"_bloank\">");
			 print("<img width=\"20\" src=\"/sites/default/files/images/google_maps.png\" /></a>");
@


1.26
log
@added new fields
@
text
@d84 1
a84 1
            function get_date($str, $from_tz, $to_tz, $format) {
d87 1
a87 1
              return $obj->format($format);
d92 15
a106 3
          $ts_from = get_date($node->field_event_date['und'][0]['value'], $from_tz, $to_tz, 'M jS Y, g:i a');
          $ts_to = get_date($node->field_event_date['und'][0]['value2'], $from_tz, $to_tz, 'g:i a'); 
          echo "$ts_from - $ts_to";
d108 1
a108 1
				<a title="Add to Calendar" href="/ical/<?php echo $node->nid; ?>/event.ics"><img width="20" src="/sites/default/files/images/Download_Event.png" /></a>
@


1.25
log
@cancelled
@
text
@d199 46
d258 8
d268 1
a268 8
  <td>  <?php 
	if(isset($node->field_event_site)) {
	  $site = node_load($node->field_event_site['und']['0']['nid']);
	  if(isset($site->field_site_please_note)) {
          print($site->field_site_please_note['und'][0]['value']);
	  }
	}
	?>
d271 5
@


1.24
log
@Whoops, not sure why this ever worked, but fixing timezone display now.
@
text
@d42 9
a50 2
    <td><B><?php print strip_tags($node->title) ?></B>
				</div>
d110 4
a113 1
	if(strtotime($node->field_event_date['und'][0]['value']) < time()) {
d158 1
a158 1
        if (brick_can_optin()) {
d189 6
a194 4
    <?php 
	$other = $node->field_event_otherinfo['und'][0]['value'];
	if(!empty($other)) {
	  print("\n$other");
@


1.23
log
@strip tags from titles
@
text
@d77 4
a80 4
            function get_date($str, $from_tz, $to_tz) {
              $obj = new DateObject($str, $from_tz);
              date_timezone_set($obj, timezone_open($to_tz));
              return $obj->getTimestamp();
d85 3
a87 3
          $ts_from = get_date($node->field_event_date['und'][0]['value'], $from_tz, $to_tz);
          $ts_to = get_date($node->field_event_date['und'][0]['value2'], $from_tz, $to_tz); 
          printf("%s - %s", date('M jS Y, g:i a', $ts_from), date('g:i a', $ts_to));
@


1.22
log
@Move things around, add optin string.
@
text
@d42 1
a42 1
    <td><B><?php print $node->title ?></B>
@


1.21
log
@Add opt-in popup to event page.
@
text
@d144 1
a144 18
           if (brick_can_optin()) {
           ?>

           <script language='javascript'>
               jQuery(document).ready(function(){
                   setupPopupForm("#initialOptinForm");

                   jQuery('#optinButton').colorbox({inline:true, href:'#currentPopupForm', transition:'none', width:'400', title: 'Opt in to this event', opacity: '0.50'});
               })
           </script>
           <input type='button' class='form-submit' id='optinButton' value='Opt-In' onclick="javascript: resetPopupForm('#initialOptinForm', 'OptinFormWrapper')"/>
           <div id="initialOptinForm" style='display:none'>
           <?php
               brick_optin_page($node->nid);
           ?>
           </div>

        <?php } ?>
d147 26
@


1.20
log
@Use separate template for ical body rendering.
@
text
@d144 18
a161 1
	?>
@


1.19
log
@jordans changhes
@
text
@d1 6
@


1.18
log
@*** empty log message ***
@
text
@d101 6
a106 2
          print("You are signed up for this event. Thank you!");
        }
@


1.17
log
@Fix bug when template is run several times.
@
text
@d33 1
a33 1
<table id="Event Details"; width="97%" border="0" cellpadding="0" cellspacing="0"> 
d37 1
d51 8
a58 2
	     print("<a href=\"http://maps.google.com/maps?q=");
	     print("$address\"> (map)</a>");
d83 2
@


1.16
log
@Whoops, forgot to check this in.
@
text
@d63 6
a68 4
          function get_date($str, $from_tz, $to_tz) {
            $obj = new DateObject($str, $from_tz);
            date_timezone_set($obj, timezone_open($to_tz));
            return $obj->getTimestamp();
@


1.15
log
@Adjust dates to target timezone, since this isn't automatic.
@
text
@d72 1
a72 1
          printf("%s - %s", format_date($ts_from, 'custom', 'M jS Y, g:i a', $tz), date('g:i a', $ts_to));
@


1.14
log
@*** empty log message ***
@
text
@d60 13
a72 3
        <?php $ts_from = strtotime($node->field_event_date['und'][0]['value']);
          $ts_to = strtotime($node->field_event_date['und'][0]['value2']); 
          printf("%s - %s", date('M jS Y, g:i a', $ts_from), date('g:i a', $ts_to));
@


1.13
log
@removed commented out code
@
text
@d5 1
a5 1
         promoteButton.colorbox({inline:true, href:"#promoteArea", transition:"none", width:"600"});
d76 2
a77 2
        if(strtotime($node->field_event_date['und'][0]['value']) < time()) {
          print("This event has already occurred");
d98 3
a100 1
                jQuery('#rsvpButton').colorbox({inline:true, href:'#rsvp-login', transition:'none', width:'400', title: 'RSVP for this event', opacity: '0.50'});
d104 2
a105 4
         <input type='button' class='form-submit' id='rsvpButton' value='RSVP Now!' onclick="javascript: resetDrupalForm('#initialRSVPForm', '#RSVPFormWrapper', '#visibleRSVPForm');"/>
         <div style='display:none'>
            <div id="initialRSVPForm">
               <div id="RSVPFormWrapper">
a108 1
 	       </div>
d110 4
a113 9
   
            <div id='rsvp-login'>
                <div id='visibleRSVPForm'> 
                </div>
            </div>
         </div>
        <?php
        }
        ?>
@


1.12
log
@*** empty log message ***
@
text
@a11 7
        /*
	rosterButton.click(function(){
		alert("HELLO");
		popupWindow = window.open(rosterButton.attr("href"),'popUpWindow','height=700,width=800,left=10,top10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes');

		return false; 
	});*/
@


1.11
log
@*** empty log message ***
@
text
@a0 4
<?php
include("roster.php");
?>

d9 1
d11 2
d14 5
a18 8
	alert('hello');
<?php
	$pdf = new fpdf('L', 'pt', 'Letter');
	$pdf->AddPage();
	$pdf->Output('test.pdf', 'D');
?>
	return false;
	 });
@


1.10
log
@*** empty log message ***
@
text
@d19 1
a19 1
	//$pdf->Output('test.pdf', 'D');
d21 1
@


1.9
log
@*** empty log message ***
@
text
@a19 1
        //generate_pdf();
@


1.8
log
@add isset() to references to site and location in case we get bogus data from v2.
@
text
@d1 177
a177 150
<?php
include("roster.php");
?>

<script language="javascript">
  jQuery(document).ready(function(){
      var promoteButton = jQuery("ul.tabs").find("a:contains('Promote')");
      if (promoteButton) {
         promoteButton.colorbox({inline:true, href:"#promoteArea", transition:"none", width:"600"});
      }

      var rosterButton = jQuery("ul.tabs").find("a:contains('Roster')");
      if (rosterButton) {
	rosterButton.click(function(){
	alert('hello');
<?php
	$pdf = new fpdf('L', 'pt', 'Letter');
	$pdf->AddPage();
	//$pdf->Output('test.pdf', 'D');
        //generate_pdf();
?>
	 });
      }
  });

</script>


<style>
table {
   border: 1px solid lightgray; 
}
td {
  vertical-align: top; 
       padding: .4em; 
}
td.title {
  font-weight: bold; 
  background-color:#EEE; 
  width: 10em;
}
</style>

<table id="Event Details"; width="97%" border="0" cellpadding="0" cellspacing="0"> 
  <tr>
    <td class='title'>Event:</td>
    <td><B><?php print $node->title ?></B>
    </td>

  </tr>
  <tr>
    <td class='title'>Location:</td>
    <td>
 	<?php
	if(isset($node->field_event_site)) {
     	   $site = node_load($node->field_event_site['und']['0']['nid']);
	   if(isset($site->location)) {
	     $address = location_address2singleline($site->location);
             print($site->title.", ");
	     print("$address");
	     print("<a href=\"http://maps.google.com/maps?q=");
	     print("$address\"> (map)</a>");
	   }
	}
      ?>
    </td>
    </tr>
  <tr>
    <td class='title'>Date:</td>
    <td>
        <?php $ts_from = strtotime($node->field_event_date['und'][0]['value']);
          $ts_to = strtotime($node->field_event_date['und'][0]['value2']); 
          printf("%s - %s", date('M jS Y, g:i a', $ts_from), date('g:i a', $ts_to));
        ?>
    </td>
  <tr>
    <td class='title'>Staff:</td> 
    <td> <?php print(brick_format_managment_list($node)); ?></td>
  </tr>
  </tr>
    <td class='title'>RSVP:</td>
    <td>
 <! @@@@@@ How do we keep the button on the same line?  >
       <?php
        global $user;

        if(strtotime($node->field_event_date['und'][0]['value']) < time()) {
          print("This event has already occurred");
        }
        else if (user_is_logged_in() && brick_get_rsvp_status($node, $user)) {
          print("You are signed up for this event. Thank you!");
        }
        else if (($open_date = brick_event_open_date($node)) > time() ) {
          print("This event will open on ");
          print(date("M jS", $open_date));
        }
        else if (brick_event_full($node)) {
                print("This event is FULL. Space often opens up a few days before the event, please check back.");
        }
        else {
          include("rsvp-button.php");
        }
        ?>
</td>
  </tr>
  <tr> 
  </tr>
  <tr>
    <td class='title'>Description:</td>
    <td><?php print($node->body['und'][0]['value']) ?>

    <?php 
	$other = $node->field_event_otherinfo['und'][0]['value'];
	if(!empty($other)) {
	  print("\n$other");
	}
	?>
    </td>
  </tr>
  <tr>
    <td class='title'>Organization: </td>
    <td> <?php
	 if(isset($node->field_event_organization)) {
	   $organization = node_load($node->field_event_organization['und']['0']['nid']);

	   if(isset($organization->body)) {
             print($organization->body['und'][0]['value']);
	   }
	}
	?>
    </td>
  </tr>
  <tr>
  <td class='title'>Location Note:</td>
  <td>  <?php 
	if(isset($node->field_event_site)) {
	  $site = node_load($node->field_event_site['und']['0']['nid']);
	  if(isset($site->field_site_please_note)) {
          print($site->field_site_please_note['und'][0]['value']);
	  }
	}
	?>
  </td>
  </tr>

</table> 

<?php
include("promote.php");
?>
@


1.7
log
@move location info into one line.
@
text
@d54 11
a64 9
       <?php
	$site = node_load($node->field_event_site['und']['0']['nid']);
       ?> 
     <?php $site = node_load($node->field_event_site['und']['0']['nid']);
	   $address = location_address2singleline($site->location);
           print($site->title.", ");
	   print("$address");
	   print("<a href=\"http://maps.google.com/maps?q=");
	   print("$address\"> (map)</a>");
d122 9
a130 2
    <td> <?php $organization = node_load($node->field_event_organization['und']['0']['nid']);
           print($organization->body['und'][0]['value']); ?>
d135 8
a142 2
  <td>  <?php $site = node_load($node->field_event_site['und']['0']['nid']);
          print($site->field_site_please_note['und'][0]['value']); ?>
@


1.6
log
@*** empty log message ***
@
text
@d47 3
a49 1
    <td><B><?php print $node->title ?></B></td>
d52 15
d108 9
a116 1
    <td><?php print($node->body['und'][0]['value']) ?></td>
a123 1

d125 1
a125 30
    <td class='title'>Other Info:</td>
    <td> <?php print($node->field_event_otherinfo['und'][0]['value']) ?></td>
  </tr>
</table> <! Event Details >

<P></P>
<table id="Event Location"; border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td class='title'>Location:</td>
    <td><b>
       <?php
	$site = node_load($node->field_event_site['und']['0']['nid']);
        print($site->title);
       ?> 
      </b></td>
    </tr>
    <tr>
      <td class='title'>Address:</td>
      <td>
       <?php $site = node_load($node->field_event_site['und']['0']['nid']);
	 $address = location_address2singleline($site->location);
	 print("$address");
	 print('<a href=\"http://maps.google.com/maps?q=');
	 print("$address\"> (map)</a>");

      ?>
      </td>
    </tr>
<tr>
  <td class='title'>Please Note:</td>
d129 1
a129 2
</tr>
</table>  <! Event Location >
d131 1
a135 2

<! About the Organization >
@


1.5
log
@remove gmap code and simply link to a google map page.
@
text
@d123 1
a123 1
	 print('<a href="http://maps.google.com/maps?q=');
@


1.4
log
@Benson's changes for roster pdf generation.
@
text
@d57 4
d94 7
a103 4
  <tr>
    <td class='title'>Staff:</td> 
    <td> <?php print(brick_format_managment_list($node)); ?></td>
  </tr>
d106 2
a107 1
<table id="About the Organization"; width="97%" border="0" cellpadding="0" cellspacing="0">
d109 28
a136 10
    <td class='title'>
     <?php $organization = node_load($node->field_event_organization['und']['0']['nid']);
        print($organization->title); ?>
    </td>
    <td>
     <?php $organization = node_load($node->field_event_organization['und']['0']['nid']);
        print($organization->body['und'][0]['value']); ?>
    </td>
  </tr>
</table> 
@


1.3
log
@*** empty log message ***
@
text
@d1 4
a5 1

d11 13
@


1.2
log
@*** empty log message ***
@
text
@d45 1
a45 1
        <?php
d47 1
a47 1
        
d51 1
a51 1
        else if (brick_get_rsvp_status($node, $user)) {
d57 1
a57 1
        } 
d62 1
a62 3
          print("<form action='/node/$node->nid/rsvp'>");
          print("<button type='submit' value='$node->nid'>SIGN UP</button>");
          print("</form>");
d65 1
a65 1
    </td>
@


1.1
log
@Initial revision
@
text
@d79 4
@
