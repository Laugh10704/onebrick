head	1.3;
access;
symbols;
locks
	jordan:1.3; strict;
comment	@# @;


1.3
date	2012.02.20.23.08.39;	author jordan;	state Exp;
branches;
next	1.2;

1.2
date	2012.02.01.05.15.30;	author jordan;	state Exp;
branches;
next	1.1;

1.1
date	2012.01.25.05.26.46;	author jordan;	state Exp;
branches;
next	;


desc
@@


1.3
log
@*** empty log message ***
@
text
@<input type="button" class="form-submit" id="rsvpButton" value="RSVP Now!" />

<?php
include ("rsvp.php");
?>
@


1.2
log
@*** empty log message ***
@
text
@a0 42
<script type="text/javascript">
   jQuery(document).ready(function(){
     jQuery('#rsvpButton').colorbox({inline:true, href:"#rsvp-login", transition:"none", width:"500", title: "RSVP for this event", opacity: "0.50"});
   })

  function sendRSVPRequest(url, extraparams) {
    var params = jQuery("#rsvp-login").serialize();

    params += extraparams;

    jQuery.ajax({
     url: url + "?" + params,
     dataType: 'json',
     success: function(result) {
        if (result.message) {
          var feedback = jQuery("#rsvpFeedback");
          feedback.html(result.message);
        }
        if (result.status == "1") {
          window.location.reload();
        }
     }
    });
  }

   function doRSVP() {
      jQuery("#rsvpFeedback").html("");
      sendRSVPRequest("/a/rsvp", "");
   }

</script>

<style type="text/css">
  #agreeArea label {
    display: inline;
    vertical-align: 2px;
  }

  #rsvp-login {
  }
</style>

d3 3
a5 38
<div style="display:none">
  <form id='rsvp-login' class="popupForm">
    <label for="rsvp-email">
      Your Email (so we can contact you about updates to the event):
    </label>
    <input type="hidden" name="nid" value="<?php echo $node->nid; ?>" />
    <input type="text" id="rsvp-email" name="email" class="form-text required" size="50" value="<?php global $user; if (user_is_logged_in()) {echo $user->mail;}?>">

     <label for="rsvp-name">
      Your Name (so we know what to call you!):
    </label>
  
    <?php
	global $user;
	$userName = "";
	if (user_is_logged_in()) {
	   $loadedUser = user_load($user->uid);
	   $userName = $loadedUser->field_user_fname[LANGUAGE_NONE][0]['value'] . " " . $loadedUser->field_user_sname[LANGUAGE_NONE][0]['value'];
	}
    ?>

    <input type="text" id="rsvp-name" name="name" class="form-text required" size="50" value="<?php echo $userName ?>">


    <div id="agreeArea">    By submitting my RSVP, I acknowledge that I am over 18 years of age. I have read, and agree to <a href="http://siliconvalley.onebrick.org/documents/waiver/" target="_blank">One Brick's Waiver, Assumption of Risk and Release.</a>
    </div>

    <div id="rsvpNote">
      <label for="rsvpNote">Note to send to organizers (optional):</label>
      <textarea style="height:100px" id="rsvpNote" name="rsvpNote"></textarea>

    </div>

    <input type="button" class="form-submit" value="RSVP" onclick="doRSVP();"/>
    <span id="rsvpFeedback"/>
  </form>
</div>

@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
     jQuery('#rsvpButton').colorbox({inline:true, href:"#rsvp-login", transition:"none", width:"500", title: "RSVP for this event"});
d46 1
a46 1
  <form id='rsvp-login'>
d56 9
d66 1
a66 1
    <input type="text" id="rsvp-name" name="name" class="form-text required" size="50" value="<?php global $user; if (user_is_logged_in()) {echo $user->field_user_fname[LANGUAGE_NONE][0]['value'] . $user->field_user_sname[LANGUAGE_NONE][0]['value'];}?>">
@
