head	1.1;
access;
symbols;
locks
	crc:1.1; strict;
comment	@# @;


1.1
date	2012.10.03.20.29.57;	author crc;	state Exp;
branches;
next	;


desc
@jordans edits
@


1.1
log
@Initial revision
@
text
@<style>
table {
   border: 1px solid lightgray; 
}
td {
  vertical-align: top; 
       padding: .4em; 
}
td.title {
  font-weight: bold; 
  background-color:#EEE; 
  width: 10em;
}
</style>

<table id="Event Details"; width="97%" border="0" cellpadding="0" cellspacing="0"> 
  <tr>
    <td class='title'>Event:</td>
    <td><B><?php print $node->title ?></B></td>
  </tr>
  <tr>
    <td class='title'>Date:</td>
    <td>
        <?php $ts_from = strtotime($node->field_event_date['und'][0]['value']);
          $ts_to = strtotime($node->field_event_date['und'][0]['value2']); 
          printf("%s - %s", date('M jS Y, g:i a', $ts_from), date('g:i a', $ts_to));
        ?>
    </td>
  </tr>
    <td class='title'>RSVP:</td>
    <td>
 <! @@@@@@ How do we keep the button on the same line?  >
        <?php
        global $user;
        
        if(strtotime($node->field_event_date['und'][0]['value']) < time()) {
          print("This event has already occurred");
        }
        else if (brick_get_rsvp_status($node, $user)) {
          print("You are signed up for this event. Thank you!");
        }
        else if (($open_date = brick_event_open_date($node)) > time() ) {
          print("This event will open on ");
          print(date("M jS", $open_date));
        } 
        else if (brick_event_full($node)) {
                print("This event is FULL. Space often opens up a few days before the event, please check back.");
        }
        else {
          print("<form action='/node/$node->nid/rsvp'>");
          print("<button type='submit' value='$node->nid'>SIGN UP</button>");
          print("</form>");
        }
        ?>
    </td>
  </tr>
  <tr> 
  </tr>
  <tr>
    <td class='title'>Description:</td>
    <td><?php print($node->body['und'][0]['value']) ?></td>
  </tr>
  <tr>
    <td class='title'>Other Info:</td>
    <td> <?php print($node->field_event_otherinfo['und'][0]['value']) ?></td>
  </tr>
  <tr>
    <td class='title'>Staff:</td> 
    <td> <?php print(brick_format_managment_list($node)); ?></td>
  </tr>
</table> <! Event Details >

<!--
<P></P>
<table id="Event Location"; border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td class='title'>Location:</td>
    <td>
       <?php $site = node_load($node->field_event_site['und']['0']['nid']);
        print($site->title);
       ?> 
      </td>
    </tr>
    <tr>
      <td class='title'>Address:</td>
      <td>
       <?php 
        $site = node_load($node->field_event_site['und']['0']['nid']);
        print(location_address2singleline($site->location));
      ?>
      </td>
    </tr>
<tr>
  <td class='title' >Driving:</td>
  <td>  <?php $site = node_load($node->field_event_site['und']['0']['nid']);
               print($site->field_site_driving['und'][0]['value']); ?>
  </td>
</tr>

<tr>
  <td class='title'>Transit:</td>
  <td>  <?php $site = node_load($node->field_event_site['und']['0']['nid']);
               print($site->field_site_transit['und'][0]['value']); ?>
  </td>
</tr>

<tr>
  <td class='title'>Please Note:</td>
  <td>  <?php $site = node_load($node->field_event_site['und']['0']['nid']);
               print($site->field_site_please_note['und'][0]['value']); ?>
  </td>
</tr>
</table>  <! Event Location >

<P></P>
<table id="Event Map"; width="97%" border="0" cellpadding="0" cellspacing="0"> 
<tr>
<td class='title'>Map:</td>
<td>
<?php
  if($site->location['latitude']== 0.0) {
    // Some imported entries do not have Long/Lat set. Look it up and then save it back.
    $geo = gmap_geocode(location_address2singleline($site->location));
    if ($geo['status'] == 200) {
      $site->location['latitude'] = $geo['latitude'];
      $site->location['longitude'] = $geo['longitude'];
      location_save($site->location, FALSE);
    }
  }
  if($site->location['latitude'] == 0.0) {
    echo "Unable to create a map";
  }
  else {
    $mymap = array(
      'latitude' => $site->location['latitude'],
      'longitude' => $site->location['longitude'],
      );
    echo theme('gmap', array('element' => array('#gmap_settings' => $mymap)));
  }
  //echo "<pre>";
  //print_r($site);
  //echo "</pre>";
  ?>
</td> </tr> </table> <! Event Map >

<P></P>
<table id="About the Organization"; width="97%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td class='title'>
     <?php $organization = node_load($node->field_event_organization['und']['0']['nid']);
        print($organization->title); ?>
    </td>
    <td>
     <?php $organization = node_load($node->field_event_organization['und']['0']['nid']);
        print($organization->body['und'][0]['value']); ?>
    </td>
  </tr>
</table> 
-->

<?php
print file_get_contents(path_to_theme() . '/promote.php');
?>

<! About the Organization >
@
